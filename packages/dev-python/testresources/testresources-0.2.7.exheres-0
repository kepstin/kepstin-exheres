# Copyright 2014 Calvin Walton <calvin.walton@kepstin.ca>
# Distributed under the terms of the GNU General Public License v2

require pypi
require setup-py [ import=setuptools blacklist=3.1 ]

SUMMARY="a pyunit extension for managing expensive test resources"
DESCRIPTION="
testresources extends unittest with a clean and simple api to provide
test optimisation where expensive common resources are needed for test
cases - for example sample working trees for VCS systems, reference
databases for enterprise applications, or web servers ... let
imagination run wild.
"
HOMEPAGE="https://launchpad.net/testresources"

LICENCES="|| ( Apache-2.0 BSD-3 )"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    test:
        dev-python/testtools[python_abis:*(-)?]
        dev-python/fixtures[python_abis:*(-)?]
"

setup-py_test_one_multibuild() {
    PYTHONPATH="$(ls -d ${PWD}/build/lib*)" edo ${PYTHON} -B -m testtools.run \
        discover lib/testresources/tests
}

