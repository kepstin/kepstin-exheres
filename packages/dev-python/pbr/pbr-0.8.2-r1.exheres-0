# Copyright 2014 Calvin Walton <calvin.walton@kepstin.ca>
# Distributed under the terms of the GNU General Public License v2

require setup-py [ import=setuptools ] pypi

SUMMARY="A library for managing setuptools packaging needs in a consistent manner."
DESCRIPTION="
pbr reads and then filters the setup.cfg data through a setup hook to
fill in default values and provide more sensible behaviors, and then
feeds the results in as the arguments to a call to setup.py - so the
heavy lifting of handling python packaging needs is still being done by
setuptools.
"
HOMEPAGE="http://docs.openstack.org/developer/pbr/"

LICENCES="Apache-2.0"
SLOT="0"
PLATFORMS="~amd64"

# A bunch of the test dependencies are unresolvable; it requires a few
# specific older versions of packages
RESTRICT="test"

# With distro dependency handling, pip support is not needed.
# See http://docs.openstack.org/developer/pbr/packagers.html#dependencies
export SKIP_PIP_INSTALL=1

DEPENDENCIES="
    test:
        dev-python/coverage[>=3.6][python_abis:*(-)?]
        dev-python/discover[python_abis:*(-)?]
        dev-python/fixtures[>=0.3.14][python_abis:*(-)?]
        dev-python/flake8[>=2.0.0][python_abis:*(-)?]
        dev-python/mock[>=0.8.0][python_abis:*(-)?]
        dev-python/python-subunit[>=0.0.18][python_abis:*(-)?]
        dev-python/Sphinx[>=1.1.2&<1.2][python_abis:*(-)?]
        dev-python/testrepository[>=0.0.18][python_abis:*(-)?]
        dev-python/testtools[>=0.9.34][python_abis:*(-)?]
    run:
        dev-python/pip [[ description = [ Handle deps with pip when working with source ] ]]
"

