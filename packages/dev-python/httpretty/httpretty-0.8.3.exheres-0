# Copyright 2014 Calvin Walton
# Distributed under the terms of the GNU General Public License v2

require pypi
require setup-py [ import=setuptools test=nose blacklist="3.1 3.2" ]

SUMMARY="HTTP client mock for Python"
DESCRIPTION="
HTTPretty is a HTTP client mock library for Python 100% inspired on
ruby's FakeWeb
"
HOMEPAGE="http://github.com/gabrielfalcao/httpretty"

LICENCES="MIT"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    build:
    build+run:
        dev-python/urllib3[>=1.7.1][python_abis:*(-)?]
    test:
        dev-python/nose[>=1.3.0][python_abis:*(-)?]
        dev-python/mock[>=1.0.1][python_abis:*(-)?]
        dev-python/sure[>=1.2.3][python_abis:*(-)?]
        dev-python/httplib2[>=0.8][python_abis:*(-)?]
        dev-python/requests[python_abis:*(-)?]
        dev-python/tornado[>=3.2][python_abis:*(-)?]
"

DEFAULT_SRC_PREPARE_PATCHES=(
    "${FILES}"/${PNV}-setup-py-encoding.diff
)

# Exclude tests which use network interfaces
NOSETESTS_PARAMS=(
    tests/unit
    --exclude=should_not_raise_on_socket_send
    --exclude=fakesock
)

